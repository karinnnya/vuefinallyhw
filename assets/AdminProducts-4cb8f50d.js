import{p as m}from"./produceStore-727c8f72.js";import{a as f,m as y}from"./pinia-9491ed26.js";import{m as C}from"./modalMixin-c2fb7250.js";import{d as k}from"./delmodalMixin-174ee69c.js";import{ba as p,ak as i,m as r,n as t,F as b,au as g,a4 as x,aK as u,aw as w,u as B,b4 as c,t as _}from"./_plugin-vue_export-helper-bc03d341.js";import{l as h,k as U,v as M}from"./runtime-dom.esm-bundler-b8fd4e16.js";import"./sweetalert2.all-4df3b2fe.js";import"./bootstrap.esm-06211441.js";const V={props:{currentPage:Number,pageCount:Number,updateCurrentPage:Function}},N={class:"pagination justify-content-center mt-3"},L=["disabled"],S=["onClick"],F=["disabled"];function A(n,e,l,P,s,d){return i(),r("div",N,[t("button",{type:"button",class:"page-link",disabled:l.currentPage===1,onClick:e[0]||(e[0]=a=>l.updateCurrentPage(l.currentPage-1))}," 上一頁 ",8,L),(i(!0),r(b,null,g(l.pageCount,a=>(i(),r("button",{type:"button",class:x(["page-link",{active:l.currentPage===a}]),key:a,onClick:o=>l.updateCurrentPage(a)},u(a),11,S))),128)),t("button",{type:"button",class:"page-link",disabled:l.currentPage===l.pageCount,onClick:e[1]||(e[1]=a=>l.updateCurrentPage(l.currentPage+1))}," 下一頁 ",8,F)])}const D=p(V,[["render",A]]),I={data(){return{onePage:6,currentPage:1,product:{},newProd:!1}},components:{PageComponent:D},computed:{...f(m,["products","sortProducts","allPage"]),pageCount(){return Math.ceil(this.products.length/this.onePage)},paginatedProducts(){console.log(this.currentPage);const n=(this.currentPage-1)*this.onePage,e=n+this.onePage;return this.products.slice(n,e)}},mixins:[C,k],methods:{...y(m,["getProducts","getPage","sendProduct","delProduct"]),updateCurrentPage(n){this.currentPage=n},openProdBtn(n,e){n==="del"?(this.delmodal.show(),this.product=e,this.newProd=!1):n=="edit"?(this.modal.show(),this.product={...e},this.newProd=!1):(this.product={},this.newProd=!0,this.modal.show())},closeBtn(n,e){n==="del"?(this.delmodal.hide(),this.delProduct(e),this.getProducts()):(this.modal.hide(),this.sendProduct(this.newProd,e),this.getProducts())}},mounted(){this.getProducts()}},T={class:"container"},j={class:"text-end"},z={class:"table mt-4 align-middle table-hover"},E=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",{width:"200"},"圖片"),t("th",null,"產品名稱"),t("th",{width:"150"},"原價"),t("th",{width:"100"},"商品狀態"),t("th",{width:"120"},"編輯")])],-1),K=["src"],q={key:0,class:"text-success"},G={key:1},H={class:"btn-group"},J=["onClick"],O=["onClick"],Q={ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},R={class:"modal-dialog modal-xl"},W={class:"modal-content border-0"},X={class:"modal-header bg-dark text-white"},Y={class:"modal-title"},Z={key:0},$={key:1},tt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),et={class:"modal-body"},ot={class:"row"},st={class:"col-sm-4 mb-3"},nt=t("h5",null,"圖片",-1),lt=t("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1),dt={style:{width:"300px"}},it=["src"],rt={class:"col-sm-8"},at={class:"mb-3"},ct=t("h5",null,"分類",-1),ut=t("option",{value:"玩具布偶"},"玩具布偶",-1),ht=t("option",{value:"文具周邊"},"文具周邊",-1),mt=t("option",{value:"生活用品"},"生活用品",-1),_t=[ut,ht,mt],pt={class:"mb-3"},bt=t("h5",null,"商品名稱",-1),gt={class:"mb-3"},Pt=t("h5",null,"售價",-1),vt={class:"mb-3"},ft=t("h5",null,"商品描述",-1),yt=t("h5",null,"是否販售",-1),Ct={class:"form-check form-switch"},kt={class:"modal-footer"},xt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),wt={id:"delProductModal",ref:"delmodal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Bt={class:"modal-dialog"},Ut={class:"modal-content border-0"},Mt=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"刪除產品")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Vt={class:"modal-body"},Nt=t("strong",{class:"text-danger"},null,-1),Lt={class:"modal-footer"},St=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Ft(n,e,l,P,s,d){const a=w("PageComponent");return i(),r("div",T,[t("div",j,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...o)=>d.openProdBtn&&d.openProdBtn(...o))},"建立新的產品")]),t("table",z,[E,t("tbody",null,[(i(!0),r(b,null,g(d.paginatedProducts,o=>(i(),r("tr",{key:o.id},[t("td",null,u(o.group),1),t("td",null,[t("img",{src:o.imgUrls,alt:"產品圖片",style:{width:"100px",height:"100px"}},null,8,K)]),t("td",null,u(o.title),1),t("td",null,u(o.price),1),t("td",null,[o.sell?(i(),r("span",q,"販售中")):(i(),r("span",G,"缺貨中"))]),t("td",null,[t("div",H,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:v=>d.openProdBtn("edit",o)}," 編輯 ",8,J),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:v=>d.openProdBtn("del",o)}," 刪除 ",8,O)])])]))),128))])]),B(a,{currentPage:s.currentPage,pageCount:d.pageCount,updateCurrentPage:d.updateCurrentPage},null,8,["currentPage","pageCount","updateCurrentPage"]),t("div",Q,[t("div",R,[t("div",W,[t("div",X,[t("h5",Y,[s.newProd?(i(),r("span",Z,"新增產品")):(i(),r("span",$,"編輯產品--"+u(s.product.title),1))]),tt]),t("div",et,[t("div",ot,[t("div",st,[t("div",null,[nt,lt,c(t("input",{type:"text",class:"form-control mb-3",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[1]||(e[1]=o=>s.product.imgUrls=o)},null,512),[[h,s.product.imgUrls]])]),t("div",dt,[t("img",{class:"img-fluid",src:s.product.imgUrls,alt:"產品圖片"},null,8,it)])]),t("div",rt,[t("div",at,[ct,c(t("select",{class:"form-select-sm","onUpdate:modelValue":e[2]||(e[2]=o=>s.product.group=o)},_t,512),[[U,s.product.group]])]),t("div",pt,[bt,c(t("input",{id:"title",type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>s.product.title=o),placeholder:"請輸入標題"},null,512),[[h,s.product.title]])]),t("div",gt,[Pt,c(t("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[4]||(e[4]=o=>s.product.price=o)},null,512),[[h,s.product.price,void 0,{number:!0}]])]),t("div",vt,[ft,c(t("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入商品描述","onUpdate:modelValue":e[5]||(e[5]=o=>s.product.content=o)},`
                  `,512),[[h,s.product.content]])]),t("div",null,[yt,t("div",Ct,[c(t("input",{class:"form-check-input",type:"checkbox",role:"switch","onUpdate:modelValue":e[6]||(e[6]=o=>s.product.sell=o),checked:""},null,512),[[M,s.product.sell]])])])])])]),t("div",kt,[xt,t("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=o=>d.closeBtn(s.newProd,s.product))}," 確認 ")])])])],512),t("div",wt,[t("div",Bt,[t("div",Ut,[Mt,t("div",Vt,[_(" 是否刪除 "),Nt,_(" "+u(s.product.title)+"(刪除後將無法恢復)。 ",1)]),t("div",Lt,[St,t("button",{type:"button",class:"btn btn-danger",onClick:e[8]||(e[8]=o=>d.closeBtn("del",s.product))}," 確認刪除 ")])])])],512)])}const qt=p(I,[["render",Ft]]);export{qt as default};
