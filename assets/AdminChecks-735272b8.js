import{S as k}from"./sweetalert2.all-4df3b2fe.js";import{ba as g,bb as r,ak as c,m as d,n as t,F as a,au as f,aK as l}from"./_plugin-vue_export-helper-bc03d341.js";import{m as v}from"./modalMixin-c2fb7250.js";import"./bootstrap.esm-06211441.js";const{VITE_APP_URL:i}={VITE_APP_URL:"https://vuefinallysever.onrender.com",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},x={data(){return{checkInfo:{},productOrders:[],member:{},state:!0}},mixins:[v],methods:{openDe(s){this.checkInfo=s,console.log(s),this.modal.show(),this.getUser(s.userId),this.selectedStatus={...s.Status}},async checkRevise(s){const{value:n}=await k.fire({title:"修改訂單狀態",input:"select",inputOptions:{訂單狀態:{已付款:"已付款",已出貨:"已出貨",已取消:"已取消"}},showCancelButton:!0,inputValidator:u=>new Promise(h=>{r.patch(`${i}/productOrders/${s.id}`,{Status:u}).then(()=>{console.log(this.selectedStatus),this.loading="",this.modal.hide(),this.getChecks()}).catch(()=>{}),h()})});n&&k.fire(`訂單狀態已修改: ${n}`)},getUser(s){r.get(`${i}/users/${s}`).then(n=>{this.member=n.data}).catch(()=>{})},getChecks(){r.get(`${i}/productOrders`).then(s=>{this.productOrders=s.data}).catch(()=>{})}},mounted(){this.getChecks()}},I={class:"table mt-4 table-hover text-center align-middle"},C=t("thead",null,[t("tr",null,[t("th",{col:"1"},"訂單日期"),t("th",{col:"1"},"訂單編號"),t("th",{col:"1"},"訂單金額"),t("th",{col:"1"},"會員編號"),t("th",{col:"1"},"訂單狀態"),t("th",{col:"1"},"狀態編輯"),t("th",{col:"1"},"詳細")])],-1),S=["onClick"],O=["onClick"],w={ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},D={class:"modal-dialog modal-xl"},E={class:"modal-content border-0"},P={class:"modal-header bg-dark text-white"},R={class:"modal-title"},B=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),L={class:"modal-body"},U=t("h5",{class:"text-center"},"訂單內容",-1),V={class:"table mt-4"},A=t("thead",null,[t("tr",null,[t("th",{col:"1"},"名稱"),t("th",{col:"1"},"金額"),t("th",{col:"1"},"數量"),t("th",{col:"1"},"小計")])],-1),M=t("p",null,"總金額：",-1),T=t("h5",{class:"text-center"},"訂單資料",-1);function q(s,n,u,h,o,_){var p,m,b;return c(),d(a,null,[t("table",I,[C,t("tbody",null,[(c(!0),d(a,null,f(o.productOrders,e=>(c(),d("tr",{key:e.id},[t("td",null,l(e.checkTime),1),t("td",null,l(e.id),1),t("td",null,l(e.total),1),t("td",null,l(e.userId),1),t("td",null,l(e.Status),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:y=>_.checkRevise(e)}," 編輯 ",8,S)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:y=>_.openDe(e)}," 詳細資訊 ",8,O)])]))),128))])]),t("div",w,[t("div",D,[t("div",E,[t("div",P,[t("h5",R,[t("span",null,"訂單編號："+l(o.checkInfo.id),1)]),B]),t("div",L,[U,t("div",null,[t("table",V,[A,t("tbody",null,[(c(!0),d(a,null,f(o.checkInfo.data,e=>(c(),d("tr",{key:e.id},[t("td",null,l(e.product.title),1),t("td",null,l(e.product.price),1),t("td",null,l(e.qty),1),t("td",null,l(e.qty*e.product.price),1)]))),128))])]),M]),T,t("p",null,"訂購人姓名： "+l(o.member.userName),1),t("p",null,"訂購人電話： "+l(o.member.tel),1),t("p",null,"收件人姓名： "+l((p=o.checkInfo.recipient)==null?void 0:p.name),1),t("p",null,"收件人姓名： "+l((m=o.checkInfo.recipient)==null?void 0:m.tel),1),t("p",null,"收件人姓名： "+l((b=o.checkInfo.recipient)==null?void 0:b.address),1)])])])],512)],64)}const j=g(x,[["render",q]]);export{j as default};
