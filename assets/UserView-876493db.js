import{m as P}from"./modalMixin-c2fb7250.js";import{l as V}from"./loginStore-197dcd65.js";import{S as w}from"./sweetalert2.all-4df3b2fe.js";import{ba as B,bb as I,aw as S,ak as n,m as c,n as t,aK as s,a4 as p,F as m,au as k,b4 as h,u as f}from"./_plugin-vue_export-helper-bc03d341.js";import{m as E}from"./pinia-9491ed26.js";import{m as _}from"./runtime-dom.esm-bundler-b8fd4e16.js";import"./bootstrap.esm-06211441.js";import"./index-b2210380.js";const{VITE_APP_URL:T}={VITE_APP_URL:"https://vuefinallysever.onrender.com",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},O={data(){return{qrcodeValue:"",productMode:!0,check:[],info:{},user:{}}},mixins:[P],methods:{...E(V,["logout"]),open(l){this.modal.show(),this.info=l,this.qrcodeValue=String(l.id)},getTicketCheck(){this.productMode=!1,this.check=[],I.get(`${T}/ticketsOrders`).then(l=>{const d=l.data;this.check=d.filter(r=>r.userId===this.userId)}).catch(l=>{w.fire(l)})},getProductCheck(){this.productMode=!0,this.check=[],I.get(`${T}/productOrders`).then(l=>{const d=l.data;this.check=d.filter(r=>r.userId===this.userId)}).catch(l=>{w.fire(l)})}},mounted(){this.admin=localStorage.getItem("admin"),this.user=localStorage.getItem("userName"),this.userId=localStorage.getItem("userId"),this.getProductCheck()}},z={class:"container pt-5"},D={class:"text-center mb-3 mt-5"},L={class:"mb-3 d-flex justify-content-between"},R={style:{display:"block","overflow-x":"auto","white-space":"nowrap"}},A={class:"table table-hover align-middle"},U={col:"1"},N=t("th",{col:"1"},"編號",-1),j=t("th",{col:"1"},"金額",-1),F={col:"1"},K=t("th",{col:"1"},"詳細",-1),Q={key:0},G={scope:"row"},H={class:""},J={key:1},W={scope:"row"},X=t("td",null,"未使用",-1),Y={class:""},Z={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$={class:"modal-dialog"},tt={class:"modal-content"},et={class:"modal-header"},ot={class:"modal-title"},st=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),lt={class:"p-5"},nt={class:"d-flex flex-column align-items-center"},ct=t("h5",{class:"text-center mt-3"},"訂單內容",-1),dt={class:"table align-middle"},it=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"名稱"),t("th",{scope:"col"},"價格"),t("th",{scope:"col"},"數量"),t("th",{scope:"col"},"小計")])],-1),rt={key:0},ut={key:1},at={key:0,class:"text-end"},ht=t("p",null,"訂單狀態：已付款",-1),_t={key:1,class:"text-end"},pt=t("p",null,"票券狀態：未使用",-1),mt=t("hr",null,null,-1),kt=t("h5",{class:"text-center mt-3"},"收件人資料",-1),ft={class:"text-center"};function bt(l,d,r,vt,o,i){var v,g,y,x,M;const b=S("BootstrapIcon"),q=S("vue-qrcode");return n(),c("div",z,[t("div",null,[t("h2",D,"您好： "+s(o.user),1),t("div",L,[t("div",null,[t("button",{class:p(["btn btn-outline-secondary me-2",{active:o.productMode}]),onClick:d[0]||(d[0]=(...e)=>i.getProductCheck&&i.getProductCheck(...e))}," 商品訂單 ",2),t("button",{class:p(["btn btn-outline-primary",{active:!o.productMode}]),onClick:d[1]||(d[1]=(...e)=>i.getTicketCheck&&i.getTicketCheck(...e))}," 票券訂單 ",2)]),t("button",{class:"btn btn-outline-info",type:"button",onClick:d[2]||(d[2]=(...e)=>l.logout&&l.logout(...e))}," 登出 ")]),t("div",R,[t("table",A,[t("thead",null,[t("tr",{class:p(["text-white align-middle",{"bg-secondary":o.productMode,"bg-primary":!o.productMode}])},[t("th",U,s(o.productMode?"訂購日期":"票券日期"),1),N,j,t("th",F,s(o.productMode?"訂單狀態":"票券狀態"),1),K],2)]),(n(!0),c(m,null,k(o.check,(e,u)=>(n(),c("tbody",{key:u},[o.productMode?(n(),c("tr",Q,[t("td",G,s(e.checkTime),1),t("td",null,s(e.id),1),t("td",null,s(e.total),1),t("td",null,s(e.Status),1),t("td",H,[f(b,{icon:"zoom-in",class:"me-1",size:"2x",onClick:a=>i.open(e),role:"button"},null,8,["onClick"])])])):(n(),c("tr",J,[t("td",null,s(e.checkTime),1),t("td",W,s(e.id),1),t("td",null,s(e.data.ticketTotle),1),X,t("td",Y,[f(b,{icon:"zoom-in",class:"me-1",size:"2x",onClick:a=>i.open(e),role:"button"},null,8,["onClick"])])]))]))),128))])]),t("div",Z,[t("div",$,[t("div",tt,[t("div",et,[t("h5",ot,"訂單編號："+s(o.info.id),1),st]),t("div",lt,[t("div",nt,[h(t("h5",null,"票券QRcode",512),[[_,!o.productMode]]),t("div",null,[h(f(q,{value:o.qrcodeValue,color:{dark:"#000000",light:"#ffffff"},type:"image/png"},null,8,["value"]),[[_,!o.productMode]])])]),ct,t("table",dt,[it,o.productMode?(n(),c("tbody",rt,[(n(!0),c(m,null,k(o.info.data,e=>{var u,a,C;return n(),c("tr",{key:e.key},[t("td",null,s((u=e.product)==null?void 0:u.title),1),t("td",null,s((a=e.product)==null?void 0:a.price),1),t("td",null,s(e.qty),1),t("td",null,s(((C=e.product)==null?void 0:C.price)*e.qty),1)])}),128))])):(n(),c("tbody",ut,[(n(!0),c(m,null,k((v=o.info.data)==null?void 0:v.ticketOrder,e=>(n(),c("tr",{key:e.key+1},[t("td",null,s(e.type),1),t("td",null,s(e.price),1),t("td",null,s(e.qty),1),t("td",null,s(e.price*e.qty),1)]))),128))]))]),t("div",null,[o.productMode?(n(),c("div",at,[t("div",null,[t("p",null,"總金額："+s(o.info.total)+"元",1),ht])])):(n(),c("div",_t,[t("p",null,"總金額："+s((g=o.info.data)==null?void 0:g.ticketTotle)+"元",1),pt]))]),h(t("div",null,[mt,kt,t("p",null,"訂單時間："+s(o.info.checkTime),1),t("p",null,"收件人姓名："+s((y=o.info.recipient)==null?void 0:y.name),1),t("p",null,"收件人電話："+s((x=o.info.recipient)==null?void 0:x.tel),1),t("p",null,"收件人地址："+s((M=o.info.recipient)==null?void 0:M.address),1),t("p",null,"訂單狀態："+s(o.info.Status),1)],512),[[_,o.productMode]])])])])],512)]),h(t("div",ft," 目前沒有訂單唷！ ",512),[[_,Object.values(o.check).length===0]])])}const Tt=B(O,[["render",bt]]);export{Tt as default};
